<div id="main-menu" class="main-menu">
  <ul>
    {{ $currentPage := . }}
    {{ range .Site.Menus.main }}

    {{if .HasChildren}}

      <li class="menu-item-{{ .Name | lower }}{{ if $currentPage.IsMenuCurrent "main" . }} active{{ end }}">
        <span>{{ .Name }}</span>
      </li>
      <ul>
        {{ range .Children }}
        <li class="menu-item-{{ .Name | lower }}{{ if $currentPage.IsMenuCurrent "main" . }} active{{ end }}">
          <a href="{{ .URL }}">
            <span>{{ .Name }}</span>
          </a>
        </li>
        {{ end }}
      </ul>
    

    {{ else }}

      <li class="menu-item-{{ .Name | lower }}{{ if $currentPage.IsMenuCurrent "main" . }} active{{ end }}">
        <a href="{{ .URL }}">
          <span>{{ .Name }}</span>
        </a>
      </li>

    {{end}}
    {{end}}
  </ul>
</div>